<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Demo - Chat Moderne - FNZ ChatBot</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    
    <!-- CSS Chat Moderne -->
    <link rel="stylesheet" href="../wwwroot/css/chat-modern.css" />
    
    <style>
        body {
            background: #f8fafc;
            font-family: 'Inter', sans-serif;
            padding: 2rem 0;
        }
        
        .demo-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .demo-header h1 {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 700;
        }
        
        .container {
            max-width: 1200px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="demo-header">
            <h1><i class="fas fa-robot me-3"></i>FNZ ChatBot - Interface Moderne</h1>
            <p class="text-muted">Démo du nouveau design de chat avec interface utilisateur modernisée</p>
        </div>

        <div class="modern-chat-container">
            <!-- Sidebar des conversations -->
            <div class="chat-sidebar">
                <div class="chat-sidebar-header">
                    <button id="newChatBtn" class="new-chat-btn">
                        <i class="fas fa-plus"></i>
                        Nouvelle conversation
                    </button>
                </div>
                
                <div class="conversations-list">
                    <div class="conversations-title">
                        <i class="fas fa-history me-2"></i>Conversations récentes
                    </div>
                    
                    <!-- Conversations de démo -->
                    <div class="conversation-item active">
                        <div class="conversation-title">Services FNZ</div>
                        <div class="conversation-preview">Pouvez-vous m'expliquer les services...</div>
                        <div class="conversation-time">Aujourd'hui à 14:30</div>
                    </div>
                    
                    <div class="conversation-item">
                        <div class="conversation-title">Questions techniques</div>
                        <div class="conversation-preview">Comment configurer le système...</div>
                        <div class="conversation-time">Hier à 16:45</div>
                    </div>
                    
                    <div class="conversation-item">
                        <div class="conversation-title">Support client</div>
                        <div class="conversation-preview">J'ai un problème avec mon compte...</div>
                        <div class="conversation-time">2 Jan à 09:15</div>
                    </div>
                    
                    <div class="conversation-item">
                        <div class="conversation-title">Fonctionnalités</div>
                        <div class="conversation-preview">Quelles sont les nouvelles...</div>
                        <div class="conversation-time">1 Jan à 11:20</div>
                    </div>
                    
                    <div class="mt-4 pt-3" style="border-top: 1px solid var(--chat-border);">
                        <button class="btn btn-outline-primary btn-sm w-100">
                            <i class="fas fa-list me-2"></i>Voir toutes les conversations
                        </button>
                    </div>
                </div>
            </div>

            <!-- Zone de chat principale -->
            <div class="chat-main">
                <!-- En-tête du chat -->
                <div class="chat-header">
                    <div class="chat-title">
                        <div class="chat-avatar">
                            <i class="fas fa-robot"></i>
                        </div>
                        <div class="chat-info">
                            <h3>Assistant FNZ</h3>
                            <div class="chat-status">
                                <div class="status-indicator"></div>
                                En ligne
                            </div>
                        </div>
                    </div>
                    
                    <div class="chat-actions">
                        <button class="action-btn" title="Partager la conversation">
                            <i class="fas fa-share-alt"></i>
                        </button>
                        <button class="action-btn" title="Sauvegarder">
                            <i class="fas fa-bookmark"></i>
                        </button>
                        <button class="action-btn" title="Paramètres">
                            <i class="fas fa-cog"></i>
                        </button>
                    </div>
                </div>

                <!-- Zone des messages -->
                <div class="chat-messages" id="messagesContainer">
                    <!-- Messages de démonstration -->
                    <div class="message-wrapper user">
                        <div class="message-avatar user">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="message-content">
                            <div class="message-bubble user">
                                Bonjour ! Pouvez-vous m'expliquer les principaux services offerts par FNZ ?
                            </div>
                            <div class="message-time">14:30</div>
                            <div class="message-status">
                                <i class="fas fa-check-double status-icon status-read"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="message-wrapper bot">
                        <div class="message-avatar bot">
                            <i class="fas fa-robot"></i>
                        </div>
                        <div class="message-content">
                            <div class="message-bubble bot">
                                Bonjour ! Je suis ravi de vous aider. FNZ propose plusieurs services clés :<br><br>
                                ?? <strong>Services financiers</strong> : Gestion de patrimoine et conseils d'investissement<br>
                                ?? <strong>Solutions technologiques</strong> : Plateformes digitales innovantes<br>
                                ?? <strong>Analytics</strong> : Analyse de données et reporting avancé<br>
                                ?? <strong>Conseil stratégique</strong> : Accompagnement personnalisé<br><br>
                                Souhaitez-vous plus de détails sur l'un de ces services ?
                            </div>
                            <div class="message-time">14:31</div>
                        </div>
                    </div>
                    
                    <div class="message-wrapper user">
                        <div class="message-avatar user">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="message-content">
                            <div class="message-bubble user">
                                Parfait ! J'aimerais en savoir plus sur les solutions technologiques.
                            </div>
                            <div class="message-time">14:32</div>
                            <div class="message-status">
                                <i class="fas fa-check-double status-icon status-read"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="message-wrapper bot">
                        <div class="message-avatar bot">
                            <i class="fas fa-robot"></i>
                        </div>
                        <div class="message-content">
                            <div class="message-bubble bot">
                                Excellente question ! Nos solutions technologiques incluent :<br><br>
                                ?? <strong>Plateforme cloud</strong> : Infrastructure moderne et sécurisée<br>
                                ?? <strong>Intelligence artificielle</strong> : Comme ce chatbot que vous utilisez actuellement<br>
                                ?? <strong>Applications mobiles</strong> : Solutions cross-platform<br>
                                ?? <strong>Cybersécurité</strong> : Protection des données de niveau entreprise<br>
                                ?? <strong>Intégrations API</strong> : Connectivité avec vos systèmes existants<br><br>
                                Ces technologies permettent d'optimiser vos processus et d'améliorer l'expérience utilisateur. Avez-vous un projet spécifique en tête ?
                            </div>
                            <div class="message-time">14:33</div>
                        </div>
                    </div>
                </div>

                <!-- Zone de saisie -->
                <div class="chat-input-area">
                    <div class="chat-input-container">
                        <div class="chat-input-wrapper">
                            <textarea 
                                id="chatInput" 
                                class="chat-input" 
                                placeholder="Tapez votre message ici..." 
                                rows="1"></textarea>
                            <div class="input-actions">
                                <button class="input-action" title="Joindre un fichier">
                                    <i class="fas fa-paperclip"></i>
                                </button>
                                <button class="input-action" title="Emoji">
                                    <i class="fas fa-smile"></i>
                                </button>
                            </div>
                        </div>
                        <button id="sendButton" class="send-button" disabled>
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="text-center mt-4">
            <p class="text-muted">
                <i class="fas fa-info-circle me-2"></i>
                Cette démo présente le nouveau design de l'interface de chat de FNZ ChatBot
            </p>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../wwwroot/js/chat-modern.js"></script>
    
    <!-- Script de démo -->
    <script>
        // Simuler l'envoi d'un message de démo
        function addDemoMessage(content, type) {
            const messagesContainer = document.getElementById('messagesContainer');
            
            const messageWrapper = document.createElement('div');
            messageWrapper.className = `message-wrapper ${type}`;
            
            const currentTime = new Date().toLocaleTimeString('fr-FR', { 
                hour: '2-digit', 
                minute: '2-digit' 
            });
            
            let avatarIcon = type === 'user' ? '<i class="fas fa-user"></i>' : '<i class="fas fa-robot"></i>';
            
            messageWrapper.innerHTML = `
                <div class="message-avatar ${type}">
                    ${avatarIcon}
                </div>
                <div class="message-content">
                    <div class="message-bubble ${type}">
                        ${content}
                    </div>
                    <div class="message-time">${currentTime}</div>
                    ${type === 'user' ? '<div class="message-status"><i class="fas fa-check status-icon status-sent"></i></div>' : ''}
                </div>
            `;
            
            // Animation d'entrée
            messageWrapper.style.opacity = '0';
            messageWrapper.style.transform = 'translateY(20px)';
            messagesContainer.appendChild(messageWrapper);
            
            setTimeout(() => {
                messageWrapper.style.transition = 'all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55)';
                messageWrapper.style.opacity = '1';
                messageWrapper.style.transform = 'translateY(0)';
                
                // Scroll vers le bas
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }, 100);
        }
        
        // Fonction pour simuler l'indicateur de frappe
        function showDemoTyping() {
            const messagesContainer = document.getElementById('messagesContainer');
            
            const typingIndicator = document.createElement('div');
            typingIndicator.className = 'typing-indicator';
            typingIndicator.id = 'demoTyping';
            typingIndicator.innerHTML = `
                <div class="typing-avatar">
                    <i class="fas fa-robot"></i>
                </div>
                <div class="typing-bubble">
                    <div class="typing-dots">
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                    </div>
                </div>
            `;
            
            messagesContainer.appendChild(typingIndicator);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            
            return typingIndicator;
        }
        
        function hideDemoTyping() {
            const typing = document.getElementById('demoTyping');
            if (typing) {
                typing.remove();
            }
        }
        
        // Initialisation de la démo
        document.addEventListener('DOMContentLoaded', function() {
            const chatInput = document.getElementById('chatInput');
            const sendButton = document.getElementById('sendButton');
            
            // Auto-resize du textarea
            chatInput.addEventListener('input', function() {
                this.style.height = 'auto';
                const scrollHeight = this.scrollHeight;
                const maxHeight = 120;
                
                if (scrollHeight <= maxHeight) {
                    this.style.height = scrollHeight + 'px';
                } else {
                    this.style.height = maxHeight + 'px';
                }
                
                // État du bouton d'envoi
                sendButton.disabled = this.value.trim().length === 0;
            });
            
            // Envoi de message de démo
            function sendDemoMessage() {
                const message = chatInput.value.trim();
                if (!message) return;
                
                // Ajouter le message utilisateur
                addDemoMessage(message, 'user');
                
                // Vider l'input
                chatInput.value = '';
                chatInput.style.height = 'auto';
                sendButton.disabled = true;
                
                // Afficher l'indicateur de frappe
                const typing = showDemoTyping();
                
                // Simuler une réponse après 2 secondes
                setTimeout(() => {
                    hideDemoTyping();
                    
                    const responses = [
                        "Merci pour votre question ! Je vais vous aider avec plaisir.",
                        "C'est une excellente question. Laissez-moi vous expliquer en détail.",
                        "Je comprends votre demande. Voici les informations que vous recherchez :",
                        "Parfait ! Je peux vous donner des conseils personnalisés sur ce sujet.",
                        "C'est un point important. Permettez-moi de vous donner une réponse complète."
                    ];
                    
                    const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                    addDemoMessage(randomResponse, 'bot');
                }, 2000);
            }
            
            // Événements
            sendButton.addEventListener('click', sendDemoMessage);
            
            chatInput.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendDemoMessage();
                }
            });
            
            // Conversation items cliquables
            const conversationItems = document.querySelectorAll('.conversation-item');
            conversationItems.forEach(item => {
                item.addEventListener('click', function() {
                    // Retirer la classe active des autres
                    conversationItems.forEach(i => i.classList.remove('active'));
                    // Ajouter à celui cliqué
                    this.classList.add('active');
                });
            });
            
            // Actions buttons
            const actionBtns = document.querySelectorAll('.action-btn');
            actionBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    // Animation feedback
                    this.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        this.style.transform = 'scale(1)';
                    }, 150);
                });
            });
            
            // Nouveau chat button
            const newChatBtn = document.getElementById('newChatBtn');
            newChatBtn.addEventListener('click', function() {
                alert('Nouvelle conversation créée ! (Démo)');
            });
            
            console.log('?? Démo du chat moderne initialisée !');
        });
    </script>
</body>
</html>